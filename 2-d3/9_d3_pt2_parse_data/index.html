<!DOCTYPE html>
<html>
  <head>
    <title>Loading and parsing CSV data with D3</title>
    <script src="https://unpkg.com/d3@7.9.0/dist/d3.min.js"></script>
    <style>
      pre {
        font-size: 7em;
      }
    </style>
  </head>
  <body>
    <pre id="message-container"></pre>
    <script>
      const csvUrl = "https://gist.githubusercontent.com/eazXneo/9b302aba8a848bfb7d7c424baede2522/raw/CSS_named_colours.csv";
      
      // The peferrable d3-csv organisation.
      d3.csv(csvUrl).then(data => {
        let message = "";
        message += Math.round(d3.csvFormat(data).length / 1024) + " kB\n";
        message += data.length + " rows\n";
        message += data.columns.length + " columns";
        document.getElementById('message-container').textContent = message;
      });


      // With fetch, async, and await.
      // ---------------
      // const fetchText = async (url) => {
      //   const response = await fetch(url);
      //   return await response.text();
      //   // console.log(text);
      // }
      // fetchText(csvUrl).then(text => {
      //   const data = d3.csvParse(text);
      //   let message = "";
      //   message += Math.round(text.length / 1024) + " kB\n";
      //   message += data.length + " rows\n";
      //   message += data.columns.length + " columns";
      //   document.getElementById('message-container').textContent = message;
      // });
      
      // "Pyramid of Doom" or "Pyramid of Death"
      // ---------------
      // const promise = fetch(url);
      // promise.then(response => {
      //     response.text().then(text => {
      //         console.log(text);
      //     });
      // });
    </script>
  </body>
</html>
